{"openapi":"3.0.0","paths":{"/users":{"get":{"operationId":"UsersController_findAll","summary":"Listar usuários","description":"RBAC: ADMIN","parameters":[],"responses":{"200":{"description":"Lista retornada com sucesso."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"}},"tags":["Users"],"security":[{"access-token":[]}]},"post":{"operationId":"UsersController_create","summary":"Criar usuário","description":"RBAC: ADMIN","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"},"examples":{"default":{"summary":"Exemplo","value":{"email":"novo.user@empresa.com","name":"Novo User","role":"REQUESTER","branchId":null,"department":"SALES","phone":"11999998888"}}}}}},"responses":{"201":{"description":"Usuário criado."},"400":{"description":"Dados inválidos (400)"},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"409":{"description":"E-mail já cadastrado."}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}":{"get":{"operationId":"UsersController_findOne","summary":"Obter detalhes de um usuário","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Usuário encontrado."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]},"patch":{"operationId":"UsersController_update","summary":"Atualizar usuário","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"Usuário atualizado."},"400":{"description":"Dados inválidos (400)"},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]},"delete":{"operationId":"UsersController_remove","summary":"Remover usuário","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Usuário removido."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}/make-approver":{"patch":{"operationId":"UsersController_makeApprover","summary":"Promover para APPROVER","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Usuário promovido."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}/revoke-approver":{"patch":{"operationId":"UsersController_revokeApprover","summary":"Revogar APPROVER","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Permissão revogada."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}/password":{"patch":{"operationId":"UsersController_setPassword","summary":"Alterar própria senha (SELF) / Definir senha (ADMIN)","description":"RBAC: SELF ou ADMIN (verificado no service)","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePasswordDto"},"examples":{"self":{"summary":"Troca própria","value":{"currentPassword":"Senha@Atual1","newPassword":"Nova@Senha2"}},"admin":{"summary":"ADMIN definindo nova senha","value":{"newPassword":"Definida@Admin3"}}}}}},"responses":{"200":{"description":"Senha atualizada."},"400":{"description":"Dados inválidos (400)"},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}/reset-password":{"post":{"operationId":"UsersController_resetPassword","summary":"Resetar senha (gera temporaryPassword e força troca)","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Senha resetada."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/users/{id}/reservations":{"get":{"operationId":"UsersController_reservations","summary":"Listar reservas do usuário","description":"RBAC: ADMIN","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Lista de reservas retornada."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Usuário não encontrado (404)"}},"tags":["Users"],"security":[{"access-token":[]}]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"Login — define cookies (refresh HttpOnly + csrf) e retorna accessToken + user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":""}}}},"/auth/refresh":{"post":{"operationId":"AuthController_refresh","summary":"Refresh — requer header x-csrf-token igual ao cookie rcsrftoken/csrftoken","description":"Após um refresh, o CSRF é rotacionado.","parameters":[{"name":"x-csrf-token","in":"header","description":"Valor deve ser idêntico ao cookie rcsrftoken (ou csrftoken).","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/auth/logout":{"post":{"operationId":"AuthController_logout","summary":"Logout — requer x-csrf-token igual ao cookie rcsrftoken/csrftoken","parameters":[{"name":"x-csrf-token","in":"header","description":"Valor deve ser idêntico ao cookie rcsrftoken (ou csrftoken).","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/auth/change-password":{"post":{"operationId":"AuthController_changePassword","summary":"Troca a própria senha; zera mustChangePassword, rotaciona refresh e retorna novo accessToken + user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":""}},"security":[{"access-token":[]}]}},"/auth/me":{"get":{"operationId":"AuthController_me","summary":"Identidade atual (requer Bearer access token)","parameters":[],"responses":{"200":{"description":""}},"security":[{"access-token":[]}]}},"/auth/get":{"get":{"operationId":"AuthController_get","summary":"Alias de /auth/me (requer Bearer access token)","parameters":[],"responses":{"200":{"description":""}},"security":[{"access-token":[]}]}},"/auth/csrf":{"get":{"operationId":"CsrfController_csrf","parameters":[],"responses":{"204":{"description":""}}}},"/documents/upload":{"post":{"operationId":"FilesController_upload","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":""}},"tags":["Documents"]}},"/health":{"get":{"operationId":"HealthController_get","parameters":[],"responses":{"200":{"description":""}}}},"/cars":{"get":{"operationId":"CarsController_list","summary":"Listar carros do tenant (filtros opcionais)","description":"RBAC: ADMIN | APPROVER | REQUESTER","parameters":[{"name":"branchId","required":false,"in":"query","description":"Filial (código de 3 letras, ex.: FOR) ou UUID v4","schema":{"example":"FOR","type":"string"}},{"name":"status","required":false,"in":"query","description":"Status do carro","schema":{"example":"AVAILABLE","enum":["AVAILABLE","IN_USE","MAINTENANCE","INACTIVE","ACTIVE"],"type":"string"}}],"responses":{"200":{"description":"Lista de carros retornada com sucesso."},"400":{"description":"Parâmetros inválidos."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"}},"tags":["Cars"],"security":[{"access-token":[]}]},"post":{"operationId":"CarsController_create","summary":"Criar um novo carro","description":"RBAC: ADMIN | APPROVER","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCarDto"},"examples":{"default":{"summary":"Exemplo","value":{"plate":"ABC1D23","model":"Fiat Cronos","color":"PRATA","mileage":12345,"status":"AVAILABLE","branchId":"b0e1a2c3-d4e5-6789-aaaa-bbbbccccdddd"}}}}}},"responses":{"201":{"description":"Carro criado com sucesso."},"400":{"description":"Payload inválido."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"409":{"description":"Placa já cadastrada neste tenant."}},"tags":["Cars"],"security":[{"access-token":[]}]}},"/cars/{id}":{"get":{"operationId":"CarsController_get","summary":"Obter detalhes de um carro por ID","description":"RBAC: ADMIN | APPROVER | REQUESTER","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Carro encontrado."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Carro não encontrado."}},"tags":["Cars"],"security":[{"access-token":[]}]},"patch":{"operationId":"CarsController_update","summary":"Atualizar dados de um carro","description":"RBAC: ADMIN | APPROVER","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCarDto"},"examples":{"parcial":{"summary":"Atualização parcial","value":{"model":"HB20 Comfort","mileage":34567,"status":"MAINTENANCE","branchName":"Filial Norte"}}}}}},"responses":{"200":{"description":"Carro atualizado com sucesso."},"400":{"description":"Payload inválido."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Carro não encontrado."},"409":{"description":"Placa já cadastrada neste tenant."}},"tags":["Cars"],"security":[{"access-token":[]}]},"delete":{"operationId":"CarsController_remove","summary":"Remover um carro","description":"RBAC: ADMIN | APPROVER","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Carro removido com sucesso."},"401":{"description":"Não autenticado (401)"},"403":{"description":"Sem permissão (403)"},"404":{"description":"Carro não encontrado."},"409":{"description":"Existem vínculos que impedem a remoção."}},"tags":["Cars"],"security":[{"access-token":[]}]}},"/stations":{"post":{"operationId":"StationsController_create","summary":"Criar estação (ADMIN/APPROVER)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStationDto"}}}},"responses":{"201":{"description":"Estação criada com sucesso."},"400":{"description":"Payload inválido."},"401":{"description":"Token ausente ou inválido."},"403":{"description":"Permissão insuficiente."},"409":{"description":"Nome já existente no tenant."}},"tags":["Stations"],"security":[{"access-token":[]}]},"get":{"operationId":"StationsController_list","summary":"Listar estações (REQUESTER/APPROVER/ADMIN)","parameters":[{"name":"pageSize","required":false,"in":"query","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"q","required":false,"in":"query","description":"Busca por nome (contains)","schema":{"type":"string"}},{"name":"branchId","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Lista retornada com sucesso."},"401":{"description":"Token ausente ou inválido."},"403":{"description":"Permissão insuficiente."}},"tags":["Stations"],"security":[{"access-token":[]}]}},"/stations/{id}":{"get":{"operationId":"StationsController_get","summary":"Obter detalhes da estação (REQUESTER/APPROVER/ADMIN)","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Estação encontrada."},"401":{"description":"Token ausente ou inválido."},"403":{"description":"Permissão insuficiente."},"404":{"description":"Estação não encontrada."}},"tags":["Stations"],"security":[{"access-token":[]}]},"patch":{"operationId":"StationsController_update","summary":"Atualizar estação (ADMIN/APPROVER)","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStationDto"}}}},"responses":{"200":{"description":"Estação atualizada com sucesso."},"400":{"description":"Payload inválido."},"401":{"description":"Token ausente ou inválido."},"403":{"description":"Permissão insuficiente."},"404":{"description":"Estação não encontrada."},"409":{"description":"Nome já existente no tenant."}},"tags":["Stations"],"security":[{"access-token":[]}]},"delete":{"operationId":"StationsController_remove","summary":"Remover estação (ADMIN/APPROVER)","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Estação removida com sucesso."},"401":{"description":"Token ausente ou inválido."},"403":{"description":"Permissão insuficiente."},"404":{"description":"Estação não encontrada."}},"tags":["Stations"],"security":[{"access-token":[]}]}},"/reservations":{"post":{"operationId":"ReservationsController_create","summary":"Criar uma reserva","description":"Cria uma nova reserva com status PENDING. Carro/Filial são opcionais nesta fase.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReservationDto"}}}},"responses":{"201":{"description":"Reserva criada.","content":{"application/json":{"schema":{"example":{"id":"0f8fad5b-d9cb-469f-a165-70867728950e","tenantId":"e23c8c9a-4d1a-4a64-bc0a-0d0c0c0c0c0c","origin":"Matriz","destination":"Cliente XPTO","startAt":"2025-11-08T14:00:00.000Z","endAt":"2025-11-08T16:00:00.000Z","status":"PENDING","purpose":"Visita comercial","carId":null,"branchId":"3b5f8a13-3d0a-4b2a-8bb1-5bb8b7a6c9e1","userId":"a1a1a1a1-1111-2222-3333-b2b2b2b2b2b2","createdAt":"2025-11-08T12:30:01.123Z","user":{"id":"...","name":"Requester","email":"requester@reservcar.com"},"branch":{"id":"...","name":"Matriz"},"car":null}}}}},"400":{"description":"Dados inválidos (ex.: datas trocadas)."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."}},"tags":["Reservations"],"security":[{"access-token":[]}]},"get":{"operationId":"ReservationsController_list","summary":"Listar reservas do tenant (geral)","description":"Lista paginada de reservas do tenant. Restrito a APPROVER/ADMIN.","parameters":[{"name":"status","required":false,"in":"query","schema":{"enum":["PENDING","APPROVED","CANCELED","COMPLETED","REJECTED"],"type":"string"}},{"name":"carId","required":false,"in":"query","description":"UUID do carro","schema":{"format":"uuid","type":"string"}},{"name":"userId","required":false,"in":"query","description":"UUID do solicitante (filtro)","schema":{"format":"uuid","type":"string"}},{"name":"branchId","required":false,"in":"query","description":"UUID da filial","schema":{"format":"uuid","type":"string"}},{"name":"from","required":false,"in":"query","description":"ISO datetime inicial","schema":{"format":"date-time","type":"string"}},{"name":"to","required":false,"in":"query","description":"ISO datetime final","schema":{"format":"date-time","type":"string"}},{"name":"page","required":false,"in":"query","description":"Página (>=1)","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"Itens por página (1–100)","schema":{"minimum":1,"maximum":100,"default":10,"type":"number"}}],"responses":{"200":{"description":"Lista paginada de reservas do tenant."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/me":{"get":{"operationId":"ReservationsController_listMine","summary":"Listar minhas reservas","description":"Lista paginada das reservas do usuário autenticado. Aceita filtros de período, status, etc.","parameters":[{"name":"status","required":false,"in":"query","schema":{"enum":["PENDING","APPROVED","CANCELED","COMPLETED","REJECTED"],"type":"string"}},{"name":"carId","required":false,"in":"query","description":"UUID do carro","schema":{"format":"uuid","type":"string"}},{"name":"userId","required":false,"in":"query","schema":{"format":"uuid","type":"string"}},{"name":"branchId","required":false,"in":"query","description":"UUID da filial","schema":{"format":"uuid","type":"string"}},{"name":"from","required":false,"in":"query","description":"ISO datetime inicial","schema":{"format":"date-time","type":"string"}},{"name":"to","required":false,"in":"query","description":"ISO datetime final","schema":{"format":"date-time","type":"string"}},{"name":"page","required":false,"in":"query","description":"Página (>=1)","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"pageSize","required":false,"in":"query","description":"Itens por página (1–100)","schema":{"minimum":1,"maximum":100,"default":10,"type":"number"}}],"responses":{"200":{"description":"Lista paginada de reservas do usuário.","content":{"application/json":{"schema":{"example":{"items":[{"id":"0f8fad5b-d9cb-469f-a165-70867728950e","origin":"Matriz","destination":"Cliente A","startAt":"2025-11-09T12:00:00.000Z","endAt":"2025-11-09T14:00:00.000Z","status":"PENDING","purpose":"SMOKE_SEED_PENDING_1","approvedAt":null,"canceledAt":null,"user":{"id":"...","name":"Requester","email":"requester@reservcar.com"},"branch":{"id":"...","name":"Matriz"},"car":{"id":"...","plate":"ABC1D23","model":"Fiat Cronos"}}],"total":2,"page":1,"pageSize":10}}}}},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/{id}":{"get":{"operationId":"ReservationsController_get","summary":"Obter detalhes de uma reserva","description":"Retorna os detalhes da reserva, respeitando escopo de tenant e propriedade (REQUESTER só vê a própria).","parameters":[{"name":"id","required":true,"in":"path","description":"UUID da reserva","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Reserva encontrada."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"REQUESTER tentando acessar reserva de outro usuário."},"404":{"description":"Reserva não encontrada no tenant."}},"tags":["Reservations"],"security":[{"access-token":[]}]},"delete":{"operationId":"ReservationsController_remove","summary":"Excluir reserva (ADMIN)","description":"Remove uma reserva do tenant.","parameters":[{"name":"id","required":true,"in":"path","description":"UUID da reserva","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Reserva removida."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."},"404":{"description":"Reserva não encontrada no tenant."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/{id}/approve":{"patch":{"operationId":"ReservationsController_approve","summary":"Aprovar reserva (atribuir carro)","description":"Aprova uma reserva PENDING e vincula um carro disponível (APPROVER/ADMIN).","parameters":[{"name":"id","required":true,"in":"path","description":"UUID da reserva","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApproveReservationDto"}}}},"responses":{"200":{"description":"Reserva aprovada."},"400":{"description":"Estado inválido ou carro indisponível."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."},"404":{"description":"Reserva/Carro não encontrado no tenant."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/{id}/cancel":{"patch":{"operationId":"ReservationsController_cancel","summary":"Cancelar reserva (REQUESTER)","description":"Cancela uma reserva PENDING do próprio usuário.","parameters":[{"name":"id","required":true,"in":"path","description":"UUID da reserva","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Reserva cancelada."},"400":{"description":"Apenas reservas PENDING podem ser canceladas."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."},"404":{"description":"Reserva não encontrada no tenant."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/{id}/complete":{"patch":{"operationId":"ReservationsController_complete","summary":"Concluir reserva","description":"Marca a reserva como COMPLETED (regras adicionais aplicam).","parameters":[{"name":"id","required":true,"in":"path","description":"UUID da reserva","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Reserva concluída."},"400":{"description":"Estado inválido ou pré-condições não atendidas."},"401":{"description":"JWT ausente ou inválido."},"403":{"description":"Acesso negado."},"404":{"description":"Reserva não encontrada no tenant."}},"tags":["Reservations"],"security":[{"access-token":[]}]}},"/reservations/{id}/documents":{"post":{"operationId":"DocumentsController_uploadForReservation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"},"type":{"type":"string","enum":["CNH","RECEIPT","ODOMETER_PHOTO","OTHER"]}},"required":["file"]}}}},"responses":{"201":{"description":""}},"tags":["Documents"],"security":[{"access-token":[]}]},"get":{"operationId":"DocumentsController_listForReservation","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Documents"],"security":[{"access-token":[]}]}},"/documents/{id}":{"get":{"operationId":"DocumentsController_get","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Documents"],"security":[{"access-token":[]}]}},"/documents/{id}/file":{"get":{"operationId":"DocumentsController_file","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Documents"],"security":[{"access-token":[]}]}},"/documents/{id}/validate":{"patch":{"operationId":"DocumentsController_validate","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateDocumentDto"}}}},"responses":{"200":{"description":""}},"tags":["Documents"],"security":[{"access-token":[]}]}},"/branches":{"get":{"operationId":"BranchesController_list","parameters":[{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/branches/{id}":{"get":{"operationId":"BranchesController_byId","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/departments":{"get":{"operationId":"DepartmentsController_list","parameters":[{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/departments/{id}":{"get":{"operationId":"DepartmentsController_byId","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"tenantId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}}},"info":{"title":"ReservCar API","description":"Auth + RBAC + CSRF double-submit","version":"1.0.0","contact":{}},"tags":[],"servers":[{"url":"/api"}],"components":{"securitySchemes":{"access-token":{"scheme":"bearer","bearerFormat":"JWT","type":"http","in":"header","name":"Authorization"},"cookie":{"type":"apiKey","in":"cookie","name":"rc_refresh_token"}},"schemas":{"CreateUserDto":{"type":"object","properties":{}},"UpdateUserDto":{"type":"object","properties":{}},"UpdatePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Senha atual"},"newPassword":{"type":"string","description":"Nova senha (mín. 8, com maiúscula, minúscula, dígito e símbolo)"}},"required":["newPassword"]},"LoginDto":{"type":"object","properties":{}},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string","description":"Senha atual"},"newPassword":{"type":"string","description":"Nova senha (mín. 8, com maiúscula, minúscula, dígito e símbolo)"}},"required":["currentPassword","newPassword"]},"CreateCarDto":{"type":"object","properties":{"plate":{"type":"string","example":"ABC1D23","description":"Aceita ABC-1234 ou ABC1D23"},"model":{"type":"string","example":"Onix 1.0"},"color":{"type":"string","example":"Prata"},"mileage":{"type":"number","example":12000,"default":0},"status":{"type":"string","enum":["AVAILABLE","IN_USE","MAINTENANCE","INACTIVE","ACTIVE"],"default":"AVAILABLE"},"branchId":{"type":"string","example":"FOR ou 3fa85f64-5717-4562-b3fc-2c963f66afa6","description":"branchId como código (3 letras) OU UUID v4."},"branchName":{"type":"string","example":"Fortaleza","description":"Nome da filial (alternativo ao branchId); resolução será feita no service."}},"required":["plate","model"]},"UpdateCarDto":{"type":"object","properties":{"plate":{"type":"string","example":"ABC1D23","description":"Aceita ABC-1234 ou ABC1D23"},"model":{"type":"string","example":"Onix 1.0"},"color":{"type":"string","example":"Prata"},"mileage":{"type":"number","example":12000},"status":{"type":"string","enum":["AVAILABLE","IN_USE","MAINTENANCE","INACTIVE","ACTIVE"]},"branchId":{"type":"string","example":"FOR ou 3fa85f64-5717-4562-b3fc-2c963f66afa6","description":"branchId como código (3 letras) OU UUID v4. Envie null para limpar."},"branchName":{"type":"string","example":"Fortaleza","description":"Nome da filial (alternativo ao branchId); resolução será feita no service."}}},"CreateStationDto":{"type":"object","properties":{}},"UpdateStationDto":{"type":"object","properties":{}},"CreateReservationDto":{"type":"object","properties":{"origin":{"type":"string","description":"Local de saída","minLength":3,"maxLength":120},"destination":{"type":"string","description":"Local de chegada","minLength":3,"maxLength":120},"startAt":{"type":"string","description":"Início da reserva (ISO 8601)"},"endAt":{"type":"string","description":"Fim da reserva (ISO 8601)"},"carId":{"type":"string","format":"uuid","description":"Carro desejado (opcional)"},"branchId":{"type":"string","format":"uuid","description":"Filial (opcional)"},"purpose":{"type":"string","description":"Finalidade/justificativa (opcional)"}},"required":["origin","destination","startAt","endAt"]},"ApproveReservationDto":{"type":"object","properties":{}},"ValidateDocumentDto":{"type":"object","properties":{}}}}}